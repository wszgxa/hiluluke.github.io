<!DOCTYPE html>
<html>
  <head>
    
    <title>
    
    gulp note 
      
    
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta charset="utf-8">
    <link rel="alternate" href="/atom.xml" title="hilu&#39;s note" type="application/atom+xml">
    
    <link rel="icon" href="/favicon.ico">
    
    <link rel="stylesheet" href="/css/style.css">
  </head>
<body>
  <script type="text/javascript">
    // fix sidebar flashing
    (function(){
      if (localStorage.getItem('sidebarState') == 'true') {
        document.body.className="sideShow"
      }
    })()
  </script>
  <div id="container">
    <aside class="sidebar">
  <div class="head-icon">
  
    <a href="/about">
      <img src="/avatar.jpeg">
    </a>
  
  </div>
  <div class="name">hiluluke</div>
  <div class="desc">
    <h4>我是一个粉刷匠</h4>  
  </div>
  <nav class="side-nav">
    <div class="nav-item">
      <a href="/archives">
        <span>
          26
        </span>
        <span>日志</span>
      </a>
    </div>
    <div class="nav-item">
      <a href="/categories">
        <span>
          7
        </span>
        <span>分类</span>
      </a>
    </div>
    <div class="nav-item">
      <a href="/tags">
        <span>
          22
        </span>
        <span>标签</span>
      </a>
    </div>
  </nav>
  
  <div class="social-wrap">
    
    <a href="https://github.com/wszgxa" target="_blank">
      <div class="item">
        <i class="i-github"></i>
      </div>
    </a>
    
    <a href="http://v2ex.com/member/hiluluke" target="_blank">
      <div class="item">
        <i class="i-v2ex"></i>
      </div>
    </a>
    
    <a href="https://www.zhihu.com/people/zhao-guo-xu" target="_blank">
      <div class="item">
        <i class="i-zhihu"></i>
      </div>
    </a>
    
    <a href="https://twitter.com/Hiluluke" target="_blank">
      <div class="item">
        <i class="i-twitter"></i>
      </div>
    </a>
    
    <a href="http://codepen.io/hiluluke" target="_blank">
      <div class="item">
        <i class="i-codepen"></i>
      </div>
    </a>
    
  </div>
  
</aside>
    <div class="wrap">
      <div class="side">
  <div class="top" id="back-top"></div>
  <div class="arrows" id="nav-btn"></div>
</div>
      <header class="header">
  <div class="arrows" id="nav-btn"></div>
</header>
      <section id="main" class="content">
        
<section class="archives-wrap">
  <div class="archives">
    <div class="title-wrap">
      <h1>gulp note </h1>
      <div class="page-info">
      
        <span>By <a href="/about">Hilu Luke</a> on</span>
      
        <time datetime="2015-10-13T16:00:00.000Z" itemprop="datePublished">Oct 14 2015</time>
      </div>
    </div>
    <div class="content-wrap">
    <p>前几天公司一个同事说了gulp用着太爽了，比grunt语法好很多。然后就猴急的尝试了下，并在公司之前的一个项目上做了实验。觉得有下面几点优点：</p>
<ul>
<li>更像是就是js语法，写起来很顺</li>
<li>代码执行顺序更清晰</li>
<li>代码量更少，主要是因为grunt各种大小括号换行导致其看起来很臃肿。</li>
<li>gulp.watch 太好用了。。</li>
</ul>
<p>当然有几点grunt也是有优点，比如本省就支持在代码上面添加banner，但是gulp需要使用插件。</p>
<p>最后，推荐小伙伴也尝试着去使用gulp。下面是我自己的一些笔记。</p>
<h3 id="gulp常用插件"><a href="#gulp常用插件" class="headerlink" title="gulp常用插件"></a>gulp常用插件</h3><ul>
<li>less的编译<a href="github.com/plus3network/gulp-less">gulp-less</a></li>
<li>自动添加css前缀<a href="http://github.com/Metrime/gulp-autoprefixer" target="_blank" rel="external">gulp-autoprefixer</a></li>
<li>压缩css<a href="http://github.com/jonathanepollack/gulp-minify-css" target="_blank" rel="external">gulp-minify-css</a></li>
<li>js代码校验<a href="http://github.com/spenceralger/gulp-jshint" target="_blank" rel="external">gulp-jshint</a></li>
<li>给代码头部添加公司等之类的注释 <a href="https://www.npmjs.com/package/gulp-header" target="_blank" rel="external">gulp-header</a></li>
<li>替换文本，用于修改版本号之类的 <a href="github.com/lazd/gulp-replace">gulp-replace</a></li>
<li>合并js文件<a href="http://github.com/wearefractal/gulp-concat" target="_blank" rel="external">gulp-concat</a></li>
<li>压缩js代码<a href="http://github.com/terinjokes/gulp-uglify" target="_blank" rel="external">gulp-uglify</a></li>
<li>压缩图片<a href="http://github.com/sindresorhus/gulp-imagemin" target="_blank" rel="external">gulp-imagemin</a></li>
<li>自动刷新页面<a href="http://github.com/vohof/gulp-livereload" target="_blank" rel="external">gulp-livereload</a></li>
<li>图片缓存，只有图片替换了才压缩<a href="http://github.com/jgable/gulp-cache" target="_blank" rel="external">gulp-cache</a></li>
<li>更改提醒<a href="http://github.com/mikaelbr/gulp-notify" target="_blank" rel="external">gulp-notify</a></li>
<li>清除文件<a href="http://www.npmjs.org/package/del" target="_blank" rel="external">del</a></li>
</ul>
<p>安装插件和grunt一样就用npm了，不啰嗦。</p>
<a id="more"></a>
<h3 id="使用及api"><a href="#使用及api" class="headerlink" title="使用及api"></a>使用及api</h3><p>当然和grunt一样需要创建任务文件，gulp的是gulpfile.js。</p>
<ul>
<li>加载插件<br>与grunt不同插件需要用require引用加载。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</div><div class="line">    sass = <span class="built_in">require</span>(<span class="string">'gulp-ruby-sass'</span>),</div><div class="line">    autoprefixer = <span class="built_in">require</span>(<span class="string">'gulp-autoprefixer'</span>),</div><div class="line">    minifycss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>),</div><div class="line">    jshint = <span class="built_in">require</span>(<span class="string">'gulp-jshint'</span>),</div><div class="line">    uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>),</div><div class="line">    imagemin = <span class="built_in">require</span>(<span class="string">'gulp-imagemin'</span>),</div><div class="line">    rename = <span class="built_in">require</span>(<span class="string">'gulp-rename'</span>),</div><div class="line">    concat = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>),</div><div class="line">    notify = <span class="built_in">require</span>(<span class="string">'gulp-notify'</span>),</div><div class="line">    cache = <span class="built_in">require</span>(<span class="string">'gulp-cache'</span>),</div><div class="line">    livereload = <span class="built_in">require</span>(<span class="string">'gulp-livereload'</span>),</div><div class="line">    del = <span class="built_in">require</span>(<span class="string">'del'</span>);</div></pre></td></tr></table></figure>
<h4 id="gulp-src-globs-options"><a href="#gulp-src-globs-options" class="headerlink" title="gulp.src(globs[,options])"></a>gulp.src(globs[,options])</h4><p>src指定需要处理的源文件的路径，借助unix的管道思想（pipe），前一级输出直接变成<br>后一级的输入，gulp.src返回当前文件流至可用插件；</p>
<ul>
<li>globs：需要处理的源文件匹配路径（必填）</li>
</ul>
<p>可以是具体指定文件:”seca/a.js”<br>还有：<code>&quot;*&quot;</code> 匹配所有文件<br><code>&quot;src/*.js&quot;</code>（包含src下的所有js文件）<br><code>&quot;**&quot;</code>匹配0个或者多个子文件夹<br><code>&quot;src/**/*.js&quot;</code>(匹配多个子文件夹的js文件)<br><code>&quot;{}&quot;</code>匹配多个属性<code>&quot;src/{a,b}.js&quot;</code><br><code>!</code>排除文件 （!src/a.js不包含src下的a.js文件）</p>
<ul>
<li>options 可选参数 opject 有3个属性buffer、read、base</li>
</ul>
<p>options.buffer boolean类型，默认为true。当设置为false时，返回file.content的流<br>并且不缓冲文件，处理大文件时非常有用。</p>
<p>options.read：  类型：Boolean  默认：true 设置false，将不执行读取文件操作，返回null；<br>options.base：  类型：String  设置输出路径以某个路径的某个组成部分为基础向后拼接，具体看下面示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">gulp.src(<span class="string">'client/js/**/*.js'</span>)</div><div class="line">  .pipe(minify())</div><div class="line">  .pipe(gulp.dest(<span class="string">'build'</span>));  <span class="comment">// Writes 'build/somedir/somefile.js'</span></div><div class="line"></div><div class="line">gulp.src(<span class="string">'client/js/**/*.js'</span>, &#123; base: <span class="string">'client'</span> &#125;)</div><div class="line">  .pipe(minify())</div><div class="line">  .pipe(gulp.dest(<span class="string">'build'</span>));  <span class="comment">// Writes 'build/js/somedir/somefile.js'</span></div></pre></td></tr></table></figure>
<h4 id="gulp-dest-path-options"><a href="#gulp-dest-path-options" class="headerlink" title="gulp.dest(path[,options])"></a>gulp.dest(path[,options])</h4><p>dest是在处理完后指定最后的输出路径。</p>
<p>path 必填，string 或则function 指定文件输出路径，或者定义函数返回文件输出路径亦可</p>
<p>options 可选，有两个属性，cwd,mode</p>
<p>options.cwd：  类型：String  默认：process.cwd()：前脚本的工作目录的路径 当文件输出路径为相对路径将会用到；<br>options.mode：  类型：String  默认：0777 指定被创建文件夹的权限；</p>
<h4 id="gulp-task-name-deps-fn"><a href="#gulp-task-name-deps-fn" class="headerlink" title="gulp.task(name[,deps],fn)"></a>gulp.task(name[,deps],fn)</h4><p>定义gulp任务</p>
<p>name必填，string，指定任务名称</p>
<p>deps可选，stringArray，指定该任务依赖的任务（被依赖的任务需要返回当前任务的事件流=）<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'testLess'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> gulp.src([<span class="string">'less/style.less'</span>])</div><div class="line">        .pipe(less())</div><div class="line">        .pipe(gulp.dest(<span class="string">'./css'</span>));</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'minicss'</span>, [<span class="string">'testLess'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">//执行完testLess任务后再执行minicss任务</span></div><div class="line">    gulp.src([<span class="string">'css/*.css'</span>])</div><div class="line">        .pipe(minifyCss())</div><div class="line">        .pipe(gulp.dest(<span class="string">'./dist/css'</span>));</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>fn 必填：function该任务调用的插件操作。</p>
<h4 id="gulp-watch-glob-opts-tasks-or-gulp-watch-glob-opts-cb"><a href="#gulp-watch-glob-opts-tasks-or-gulp-watch-glob-opts-cb" class="headerlink" title="gulp.watch(glob [, opts], tasks) or gulp.watch(glob [, opts, cb])"></a>gulp.watch(glob [, opts], tasks) or gulp.watch(glob [, opts, cb])</h4><p>watch 用于监听文件变化，文件一修改就会执行指定的任务</p>
<p>glob：需要处理的源文件匹配符路径。</p>
<p>opts：可选：Object</p>
<p>tasks：必填，StringArray 需要执行的任务名称数组</p>
<p>cb(event) 可选：Function每个文件变化时执行的毁掉函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'watch1'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    gulp.watch(<span class="string">'less/**/*.less'</span>, [<span class="string">'testLess'</span>]);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'watch2'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    gulp.watch(<span class="string">'js/**/*.js'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'File '</span> + event.path + <span class="string">' was '</span> + event.type + <span class="string">', running tasks...'</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>主要就是task+dest+src+watch，然后再就是各种插件的使用，就ok了，上手很快，感觉3个小时左右就可以了。</p>

    </div>
  </div>
</section>

      </section>
    <footer style="text-align:center">
  啦啦啦，主题搭建中。。。
</footer>
    </div>
  </div>
  <script src="/js/simple_dev.js"></script>
</body>
</html>