<!DOCTYPE html><html><head><title> 使用伪元素创建图片堆叠特效 | 日常翻译四</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta charset="utf-8"><link rel="alternate" href="" title="hilu&#39;s note" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><style>.menu-home .menu-item-home{color:#b71c1c}.menu-categories .menu-item-categories{color:#b71c1c}.menu-tags .menu-item-tags{color:#b71c1c}.menu-about .menu-item-about{color:#b71c1c}.menu-rss .menu-item-rss{color:#b71c1c}</style><link rel="stylesheet" href="/css/style.css"></head><body><script type="text/javascript">!function(){"true"==localStorage.getItem("sidebarState")&&(document.body.className="sideShow")}()</script><div id="container"><aside class="sidebar"><div class="head-icon"> <a href="/about"><img src="/avatar.jpeg"></a></div><div class="name">hiluluke</div><div class="desc"><h4>我是一个粉刷匠</h4></div><nav class="side-nav"><div class="nav-item"> <a href="/"><span>29</span> <span>日志</span></a></div><div class="nav-item"> <a href="/categories"><span>7</span> <span>分类</span></a></div><div class="nav-item"> <a href="/tags"><span>22</span> <span>标签</span></a></div></nav><div class="social-wrap"><a href="https://github.com/wszgxa" target="_blank"><div class="item"><i class="i-github"></i></div></a><a href="http://v2ex.com/member/hiluluke" target="_blank"><div class="item"><i class="i-v2ex"></i></div></a><a href="https://www.zhihu.com/people/zhao-guo-xu" target="_blank"><div class="item"><i class="i-zhihu"></i></div></a><a href="https://twitter.com/Hiluluke" target="_blank"><div class="item"><i class="i-twitter"></i></div></a><a href="http://codepen.io/hiluluke" target="_blank"><div class="item"><i class="i-codepen"></i></div></a></div></aside><div class="wrap"><div class="side"><div class="top" id="back-top"></div><div class="arrows" id="nav-btn"></div></div><header class="header menu-2015"><nav> <a class="menu-item-home" href="/">首页</a> <a class="menu-item-categories" href="/categories">分类</a> <a class="menu-item-tags" href="/tags">标签</a> <a class="menu-item-about" href="/about">关于</a> <a class="menu-item-rss" href="/atom.xml">RSS</a></nav></header><section id="main" class="content"><div class="archives-wrap"><div class="archives"><div class="title-wrap"><h1>使用伪元素创建图片堆叠特效 <small>日常翻译四</small></h1><div class="page-info"> <span>By <a href="/about">hiluluke</a> on</span> <time datetime="2015-08-18T16:00:00.000Z" itemprop="datePublished">Aug 19 2015</time></div></div><div class="content-wrap"><p>今天我们将尝试去将在html中单独的一张图片利用css变换出堆叠的效果。关键的地方就是伪元素。</p><p>同时我们将看到，在我们实现的过程中，我们将会很快遇到一些混乱的代码，然后我们将使用一些方法使得代码变得整洁。</p><a id="more"></a><p><img src="http://7fvhwe.com1.z0.glb.clouddn.com/stackscss-0.jpg" alt=""></p><h2 id="挑战！"><a href="#挑战！" class="headerlink" title="挑战！"></a>挑战！</h2><p>我在找一些素材给我的下载站的时候，我发现了一个小巧且免费的PSD名字叫做(Stack)[<a href="http://pixelsdaily.com/resources/photoshop/psds/stacks/],他能够帮助你快速且容易的构建一个偏光图片就像在ps里一样。" target="_blank" rel="external">http://pixelsdaily.com/resources/photoshop/psds/stacks/],他能够帮助你快速且容易的构建一个偏光图片就像在ps里一样。</a></p><p><img src="http://7fvhwe.com1.z0.glb.clouddn.com/stackscss-1.jpg" alt=""></p><p>就如你所见，它相当的不错。然后呢，我突然就想尝试用css来制作这种效果。这是一种比较复杂的情况，因为这里有很多层堆叠在一起，然而我又不像杂乱的将3张图片叠在一起。因此我们能够最小化的使用html标记，并达到这种效果。最后发现，结果就是使用伪元素。</p><h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><p>我们仅仅需要一个div来包含一个img，从而完成我们的第一层堆叠效果。然后html就够了，剩下的全是css的活。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stackone"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://lorempixum.com/200/200/city/7"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure><h2 id="基础样式"><a href="#基础样式" class="headerlink" title="基础样式"></a>基础样式</h2><p>基础样式没有完成特别的内容，只是设置了基础的,margin和padding这样在我们的浏览器中就能够呈现一样的内容了。还有就是我们的图片的border将会时白色，因此我们需要给背景一点颜色。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">* &#123;<span class="attribute">margin</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">0</span>;&#125;</div><div class="line"><span class="selector-tag">body</span> &#123;<span class="attribute">background</span>: <span class="number">#ccd3d7</span>;&#125;</div></pre></td></tr></table></figure><h2 id="顶部图片样式"><a href="#顶部图片样式" class="headerlink" title="顶部图片样式"></a>顶部图片样式</h2><p>现在是时候让我们无聊的图片变得有趣点。这里有一大块的代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.stackone</span> &#123;</div><div class="line">    <span class="attribute">border</span>: <span class="number">6px</span> solid <span class="number">#fff</span>;</div><div class="line">    <span class="attribute">float</span>: left;</div><div class="line">    <span class="attribute">height</span>: <span class="number">200px</span>; <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">50px</span>;</div><div class="line">    <span class="attribute">position</span>: relative;</div><div class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">    <span class="attribute">-moz-box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>让我们把他们分成一部分一部分的讲解下。这里4行代码决定了我们图片的大小和位置：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">float</span>: <span class="selector-tag">left</span>;</div><div class="line"><span class="selector-tag">height</span>: 200<span class="selector-tag">px</span>; <span class="selector-tag">width</span>: 200<span class="selector-tag">px</span>;</div><div class="line"><span class="selector-tag">margin</span>: 50<span class="selector-tag">px</span>;</div><div class="line"><span class="selector-tag">position</span>: <span class="selector-tag">relative</span>;</div></pre></td></tr></table></figure><p>因为我们需要一个画廊的效果，我们将照片浮动到左边然后设置一个适当的50px的margin让让他们隔开点。高和宽我们都设置成我们照片的宽高（200px by 200px）。</p><p>这段代码最有趣的地方是，我们将其设置城相对定位。就像现在看到的，它并不会做出特别的效果。我这样做的原因是，我知道我后面的伪元素将要使用绝对定位。我想让他们的位置都相对于元素定位，而不是页面。</p><h3 id="酷…"><a href="#酷…" class="headerlink" title="酷…"></a>酷…</h3><p>剩下的代码部分主要时为了美观。我加入了一个较厚的白色border和一个盒阴影，最好加上对应的前缀使得其有较好的兼容性。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">border</span>: 6<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#fff</span>;</div><div class="line"><span class="selector-tag">-webkit-box-shadow</span>: 2<span class="selector-tag">px</span> 2<span class="selector-tag">px</span> 5<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.3</span>);</div><div class="line"><span class="selector-tag">-moz-box-shadow</span>: 2<span class="selector-tag">px</span> 2<span class="selector-tag">px</span> 5<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.3</span>);</div><div class="line"><span class="selector-tag">box-shadow</span>: 2<span class="selector-tag">px</span> 2<span class="selector-tag">px</span> 5<span class="selector-tag">px</span> <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.3</span>);</div></pre></td></tr></table></figure><h3 id="运行看看"><a href="#运行看看" class="headerlink" title="运行看看"></a>运行看看</h3><p>可以再结果中看到我们的顶部照片看起来非常不错。而我们才加入几行代码而已。</p><p><img src="http://7fvhwe.com1.z0.glb.clouddn.com/选区_002.png" alt=""></p><h2 id="第一个伪元素"><a href="#第一个伪元素" class="headerlink" title="第一个伪元素"></a>第一个伪元素</h2><p>现在是时间加入我们的第一个堆叠效果了。基本上我们只是想让其看起来像是其堆叠在另外一张照片上面。我们将使用:before伪元素来达到这个效果，并使用和上面差不多的代码。</p><p>为了达到效果，我们将使用下面这种语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.stackone</span><span class="selector-pseudo">:before</span> &#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>上面这段代码，我们定位到了我们的第一张图片，然后加上了没有内容的:before伪元素。这样我们就得到了一个可以加入特效的元素了。现在，让我们给他添加和便面图片相同的样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.stackone</span><span class="selector-pseudo">:before</span> &#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">200px</span>; <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="number">#eff4de</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">6px</span> solid <span class="number">#fff</span>;</div><div class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">    <span class="attribute">-moz-box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>这里主要需要理解的是，我们并没有和图片打交道。我能够加载另外一张图片，但是这是一个坏主意，你可以想想我将重复加载一张图片三次。幸运的是，伪元素的大部分将会被遮挡，我们能够填充一个固定的颜色然后任然能达到我们想要的效果。</p><h3 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h3><p>现在，我们运行看结果，看起来并不如意。我们搞乱了我们的图片。</p><p><img src="http://7fvhwe.com1.z0.glb.clouddn.com/stackscss-3.jpg" alt=""></p><p>就像你看见的，我们的伪元素干扰了我们的图片的布局。为了修复这个，我们需要加上定位的代码，然后用z-index将它定在image后面。我将不同部分的嗲吗分开了，这样你就能清除看清我们每个部分都是干嘛的了。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.stackone</span><span class="selector-pseudo">:before</span> &#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">200px</span>; <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="number">#eff4de</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">6px</span> solid <span class="number">#fff</span>;</div><div class="line">     </div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</div><div class="line">    <span class="attribute">top</span>: <span class="number">0px</span>;</div><div class="line">    <span class="attribute">left</span>: -<span class="number">10px</span>;</div><div class="line">     </div><div class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">    <span class="attribute">-moz-box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">     </div><div class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(-5deg);</div><div class="line">    <span class="attribute">-moz-transform</span>: <span class="built_in">rotate</span>(-5deg);</div><div class="line">    <span class="attribute">-o-transform</span>: <span class="built_in">rotate</span>(-5deg);</div><div class="line">    <span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(-5deg);</div><div class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-5deg);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>通过使用绝对定位，我们能够将我们的图片“推”到我们图片的起始位置。就像我前面说的z-index将这个伪元素变成了背景。最后我们使用transform特效让图片旋转一个角度，这样就得到了你在原来psd上看到的效果。</p><h3 id="运行看看-1"><a href="#运行看看-1" class="headerlink" title="运行看看"></a>运行看看</h3><p>现在，一切看起来都不错！我们的“第二张照片”很好的叠在我们第一张图片下面，然后其还有一个很好的角度，看起来就和原第一张图片时分割开的。</p><p><img src="http://7fvhwe.com1.z0.glb.clouddn.com/选区_003.png" alt=""></p><h2 id="第二个伪元素"><a href="#第二个伪元素" class="headerlink" title="第二个伪元素"></a>第二个伪元素</h2><p>就像你能猜到的那样，去为了加上第三个图片堆叠的效果，我们需要使用:after伪元素。这个工作和刚刚做的差不多，我们没有必要细致的再讲一遍。我们只需要改变位置和转移角度即可。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.stackone</span><span class="selector-pseudo">:after</span> &#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">200px</span>; <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">background</span>: <span class="number">#768590</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">6px</span> solid <span class="number">#fff</span>;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</div><div class="line">    <span class="attribute">top</span>: <span class="number">5px</span>;</div><div class="line">    <span class="attribute">left</span>: <span class="number">0px</span>;</div><div class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">    <span class="attribute">-moz-box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(4deg);</div><div class="line">    <span class="attribute">-moz-transform</span>: <span class="built_in">rotate</span>(4deg);</div><div class="line">    <span class="attribute">-o-transform</span>: <span class="built_in">rotate</span>(4deg);</div><div class="line">    <span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(4deg);</div><div class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(4deg);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="运行看看-2"><a href="#运行看看-2" class="headerlink" title="运行看看"></a>运行看看</h2><p>看到了吗？我们制作好了我们第一个图片堆叠效果。只需要一张图片，就可以这么漂亮。</p><p><img src="http://7fvhwe.com1.z0.glb.clouddn.com/选区_004.png" alt=""></p><h2 id="有缺陷的工作流程"><a href="#有缺陷的工作流程" class="headerlink" title="有缺陷的工作流程"></a>有缺陷的工作流程</h2><p>给出的psd有几种不同的图片堆叠效果，我也想使用css达到同样的效果。如果我们只是将其复制粘贴然后改变位置和角度，这不是又是另外一个坑吗？</p><p>问题是这样的：想上面那样做了3个堆叠特效，会有一大堆可怕的夯余代码。仔细看看，你会发现其比1977年的表格布局还要恶心。我们做了一大堆的重复工作。</p><h3 id="“DRY”CSS"><a href="#“DRY”CSS" class="headerlink" title="“DRY”CSS"></a>“DRY”CSS</h3><p>Andy Hunt和Dave Thomas 在编程中创造了“DRY”术语，它的意思时不要做重复的事。然而，CSS不是科学上的编程语言，它只是一个样式编辑语言。然而，如果我们把它看做编程语言，并利用DRY模式去对待它，我们将会得到更好的代码。</p><h2 id="再试试！"><a href="#再试试！" class="headerlink" title="再试试！"></a>再试试！</h2><p>如果我们创建一大堆的classes选择器，我们的CSS将会变得十分笨重。我们将不得不创建一个又一个单独的class然后贴上一大堆的代码。再加上伪元素的选取之类的，我们又将增加更多重复的代码。</p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">.stackone &#123;...&#125;</div><div class="line">.stacktwo &#123;...&#125;</div><div class="line">.stackthree &#123;...&#125;</div><div class="line">.stackfour &#123;...&#125;</div><div class="line">.stackfive &#123;...&#125;</div><div class="line">.stacksix &#123;...&#125;</div><div class="line">.stackseven &#123;...&#125;</div><div class="line">.stackeight &#123;...&#125;</div></pre></td></tr></table></figure><p>这里其实可以将公有的属性用在一起：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.stackone</span>, <span class="selector-class">.stacktwo</span>, <span class="selector-class">.stackthree</span>, <span class="selector-class">.stackfour</span>, <span class="selector-class">.stackfive</span>, <span class="selector-class">.stacksix</span>, <span class="selector-class">.stackseven</span>, <span class="selector-class">.stackeight</span> &#123;</div><div class="line">    <span class="attribute">border</span>: <span class="number">6px</span> solid <span class="number">#fff</span>;</div><div class="line">    <span class="attribute">float</span>: left;</div><div class="line">    <span class="attribute">height</span>: <span class="number">200px</span>; <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">position</span>: relative;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">50px</span>;</div><div class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">    <span class="attribute">-moz-box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>这样要好很多。</p><p>注意到我们的这些类都以5个相同字母开始的没有？利用这一点，我们可以使用属性模式匹配选择器，我们只需要指出开始的几个字母就可以了。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">div</span><span class="selector-attr">[class*='stack']</span> &#123;</div><div class="line">    <span class="attribute">border</span>: <span class="number">6px</span> solid <span class="number">#fff</span>;</div><div class="line">    <span class="attribute">float</span>: left;</div><div class="line">    <span class="attribute">height</span>: <span class="number">200px</span>; <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">position</span>: relative;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">50px</span>;</div><div class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">    <span class="attribute">-moz-box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">    <span class="attribute">box-shadow</span>: <span class="number">2px</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(0,0,0,0.3);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>这样多好，这样就选择了所有我们要指定的classes。而且，当我们再加入class时，他还是能够选择到。</p><p>让我们好好利用这个属性来优化我们的代码。如下代码，你可以看见下面的代码我们去尝试匹配元素的键名只使用了一次。就如你看见的，定义了只有stack的类。然后我们将之引用到:before 和 :after和stack类三者相同的描述中。将上面的范围变窄，我们接着只申明了:before 和 :after的样式。最后我们给:before添加了不同的背景颜色。</p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line">div[class*='stack'] &#123;</div><div class="line">    float: left;</div><div class="line">    position: relative;</div><div class="line">    margin: 50px;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">div[class*='stack'], div[class*='stack']:before, div[class*='stack']:after &#123;</div><div class="line">    border: 6px solid #fff;</div><div class="line">    height: 200px; width: 200px;</div><div class="line">    -webkit-box-shadow: 2px 2px 5px rgba(0,0,0,0.3);</div><div class="line">    -moz-box-shadow: 2px 2px 5px rgba(0,0,0,0.3);</div><div class="line">    box-shadow: 2px 2px 5px rgba(0,0,0,0.3);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">div[class*='stack']:before, div[class*='stack']:after &#123;</div><div class="line">    background: #768590;</div><div class="line">    content: "";</div><div class="line">    position: absolute;</div><div class="line">    z-index: -1;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">div[class*='stack']:before &#123;</div><div class="line">    background: #eff4de;</div><div class="line">&#125;</div><div class="line">``` </div><div class="line"></div><div class="line">我们在这只是字面上的将上百行的代码压缩到一小块代码中。这将有助于代码的维护，减少加载时间，和让你自己保持清醒。最开始使用DRY原则会有一点麻烦，但是你一旦这样做了就不会在回头了。</div><div class="line"></div><div class="line">### 其他的堆叠</div><div class="line"></div><div class="line">![](http://7fvhwe.com1.z0.glb.clouddn.com/stackscss-6.jpg)</div><div class="line"></div><div class="line">这一步中，我们将实现堆叠效果不同代码部分。一点Sass或则Less将会帮助很大，但是读者有些还不熟悉sass或则less所有这部分代码还是css。</div><div class="line"></div><div class="line">```css</div><div class="line">/*STACK ONE*/</div><div class="line">.stackone:before &#123;</div><div class="line">    top: 4px;</div><div class="line">    left: -6px;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">.stackone:after &#123;</div><div class="line">    top: -2px;</div><div class="line">    left: -6px;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">/*STACK TWO*/</div><div class="line">.stacktwo:before &#123;</div><div class="line">    top: 0px;</div><div class="line">    left: -10px;</div><div class="line">    -webkit-transform: rotate(-5deg);</div><div class="line">    -moz-transform: rotate(-5deg);</div><div class="line">    -o-transform: rotate(-5deg);</div><div class="line">    -ms-transform: rotate(-5deg);</div><div class="line">    transform: rotate(-5deg);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">.stacktwo:after &#123;</div><div class="line">    top: 5px; left: 0px;</div><div class="line">    -webkit-transform: rotate(4deg);</div><div class="line">    -moz-transform: rotate(4deg);</div><div class="line">    -o-transform: rotate(4deg);</div><div class="line">    -ms-transform: rotate(4deg);</div><div class="line">    transform: rotate(4deg);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">/*STACK THREE*/</div><div class="line">.stackthree:before &#123;</div><div class="line">    top: 5px;</div><div class="line">    left: -15px;</div><div class="line">    z-index: -1;</div><div class="line">    -webkit-transform: rotate(-10deg);</div><div class="line">    -moz-transform: rotate(-10deg);</div><div class="line">    -o-transform: rotate(-10deg);</div><div class="line">    -ms-transform: rotate(-10deg);</div><div class="line">    transform: rotate(-10deg);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">.stackthree:after &#123;</div><div class="line">    top: -2px;</div><div class="line">    left: -10px;</div><div class="line">    -webkit-transform: rotate(-5deg);</div><div class="line">    -moz-transform: rotate(-5deg);</div><div class="line">    -o-transform: rotate(-5deg);</div><div class="line">    -ms-transform: rotate(-5deg);</div><div class="line">    transform: rotate(-5deg);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="浏览器通用性"><a href="#浏览器通用性" class="headerlink" title="浏览器通用性"></a>浏览器通用性</h2><p>在我的测试中，浏览器兼容还是不错的。上面所有的将会在Safari、Firefox、Chrome、Opera和IE9+浏览器表现良好。对于IE7，你将得到一个简单的画框，不会有堆叠特效，在美学上这样显示也还可以。</p><p>IE8就比较复杂了，因为它部分支持了上述新特性，使得它让所有变现都扭曲了。你能够决定怎样去解决这个问题。不过我这里使用一个不友好的hack方法去只定位IE8。使用这个方法，我简单的隐藏了:before和:after元素，这样IE8就得到了一个想IE7一样的效果。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">div</span><span class="selector-attr">[class*='stack']</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">div</span><span class="selector-attr">[class*='stack']</span><span class="selector-pseudo">:after</span> &#123;</div><div class="line">    <span class="attribute">background</span>: <span class="number">#768590</span>;</div><div class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</div><div class="line">    <span class="attribute">position</span>: absolute;</div><div class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</div><div class="line">     </div><div class="line">    <span class="comment">/*Dirty IE8 hack*/</span></div><div class="line">    <span class="attribute">height</span>: <span class="number">0px</span>\<span class="number">9</span>; <span class="attribute">width</span>: <span class="number">0px</span>\<span class="number">9</span>; </div><div class="line">    <span class="attribute">border</span>: none\<span class="number">9</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>这类选择器在IE8中不被支持，但是带冒号的伪元素选择器是被支持的。如果列出哪些类，而不是使用类名匹配选择器，IE8将会表现出我们之前的特效。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>我们学了很多今天。其中包括图片堆叠特效，学习如何使用:before和:after，还讨论了使用DRY思想的代码最佳实践。<br>然后博主打了个广告：<a href="http://pixelsdaily.com/" target="_blank" rel="external">PixelsDaily</a></p><p> <strong>本文翻译自<a href="http://designshack.net/articles/css/use-pseudo-elements-to-create-an-image-stack-illusion/" target="_blank" rel="external">Use Pseudo Elements to Create an Image Stack Illusion</a>,如果有问题请在评论中指出,谢谢</strong></p></div></div></div><div class="ds-thread" data-thread-key="2015/08/19/fanyi-usePseudo/" data-title="使用伪元素创建图片堆叠特效" data-url="http://hiluluke.cn/2015/08/19/fanyi-usePseudo/"></div></section><footer class="footer"><div>我是一个粉刷匠</div><div>由 <a href="https://hexo.io/">Hexo</a> 强力驱动 | 主题- <a href="https://github.com/wszgxa/hexo-theme-simple">Simple</a></div></footer></div></div><script src="/js/simple_build.js"></script><script type="text/javascript">var duoshuoQuery={short_name:"hiluluke"};!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}()</script><script>!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-83014983-1","auto"),ga("send","pageview")</script></body></html>