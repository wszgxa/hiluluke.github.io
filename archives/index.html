<!DOCTYPE html><html><head><meta charset="utf-8"><link rel="dns-prefetch" href="//7fvhwe.com1.z0.glb.clouddn.com/"><link rel="dns-prefetch" href="//hilus-note.disqus.com"><link rel="dns-prefetch" href="//www.google-analytics.com/"><title> 归档 | hilu&#39;s note</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="alternate" href="" title="hilu&#39;s note" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><style>.menu-home .menu-item-home{color:#b71c1c}.menu-categories .menu-item-categories{color:#b71c1c}.menu-tags .menu-item-tags{color:#b71c1c}.menu-about .menu-item-about{color:#b71c1c}.menu-rss .menu-item-rss{color:#b71c1c}</style><style>blockquote,body,button,dd,dl,dt,fieldset,form,h1,h2,h3,h4,h5,h6,hr,input,legend,li,ol,p,pre,td,textarea,th,ul{margin:0;padding:0}.wrap,body{position:relative}h1,h2,h3,h4,h5,h6{font-weight:400;font-size:100%}address,cite,dfn,em,i,var{font-style:normal}code,kbd,pre,samp{font-family:courier new,courier,monospace}small{font-size:16px}ol,ul{list-style:none}a{text-decoration:none}.archives .content-wrap a:hover,.cate-list a:hover,.content .gist .gist-file .gist-meta a:hover,.footer a:hover{text-decoration:underline}fieldset,img{border:0}input,select{-webkit-tap-highlight-color:transparent}@-moz-keyframes flow{from{transform:translate3d(0,-30px,0);opacity:0}to{transform:translate3d(0,0,0);opacity:1}}@-webkit-keyframes flow{from{transform:translate3d(0,-30px,0);opacity:0}to{transform:translate3d(0,0,0);opacity:1}}@-o-keyframes flow{from{transform:translate3d(0,-30px,0);opacity:0}to{transform:translate3d(0,0,0);opacity:1}}@keyframes flow{from{transform:translate3d(0,-30px,0);opacity:0}to{transform:translate3d(0,0,0);opacity:1}}body,html{height:100%}html{-webkit-overflow-scrolling:touch;-webkit-text-size-adjust:100%}body{word-break:break-all;word-wrap:break-word;font-size:1em;line-height:1.5;font-family:"Lantinghei SC","Open Sans",Arial,"Hiragino Sans GB","Microsoft YaHei",STHeiti,"WenQuanYi Micro Hei",SimSun,Helvetica,sans-serif;background:#fefefe;color:#323232}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_1469071762_054906.eot);src:url(//at.alicdn.com/t/font_1469071762_054906.eot?#iefix) format('embedded-opentype'),url(//at.alicdn.com/t/font_1469071762_054906.woff) format('woff'),url(//at.alicdn.com/t/font_1469071762_054906.ttf) format('truetype'),url(//at.alicdn.com/t/font_1469071762_054906.svg#iconfont) format('svg')}.i-codepen,.i-douban,.i-facebook,.i-github,.i-left,.i-next,.i-right,.i-twitter,.i-v2ex,.i-weibo,.i-zhihu{font-family:iconfont;font-size:18px;font-style:normal;color:#616171}.i-weibo::after{content:'\e607'}.i-github::after{content:'\e60a'}.i-v2ex::after{content:'\e606'}.i-douban::after{content:'\e605'}.i-zhihu::after{content:'\e608'}.i-twitter::after{content:'\e609'}.i-facebook::after{content:'\e60b'}.i-codepen::after{content:'\e601'}.i-left::after{content:'\e600'}.i-right::after{content:'\e602'}.i-next::after{content:'\e603'}.wrap{transition:.3s all ease-in-out}.side,.sidebar{position:fixed}.header{max-width:840px;margin:0 auto 20px;text-align:center;background-color:#fff;box-shadow:0 1px 3px #e3e3e3;-webkit-box-shadow:0 1px 3px #e3e3e3;-moz-box-shadow:0 1px 3px #e3e3e3;-ms-box-shadow:0 1px 3px #e3e3e3;-o-box-shadow:0 1px 3px #e3e3e3}.header a:hover,.side .arrows,.side .top{background-color:#e3e3e3}.header a{color:#323232;display:inline-block;padding:10px;transition:background-color .2s ease}.header .ac{color:#b71c1c}.side{bottom:40px;transition:.3s all}.side .arrows,.side .top{width:35px;height:35px;border:1px solid transparent;line-height:35px;text-align:center;cursor:pointer;border-radius:3px}.side .arrows:after,.side .top:after{content:'\e602';font-family:iconfont;font-size:16px;color:#323232}.sidebar .desc,.sidebar .name{font-size:15px;text-align:center}.side .arrows:hover:after,.side .top:hover:after{color:#b71c1c}.side .top{margin-bottom:1px;transform:rotate3d(0,0,1,-90deg);-webkit-transform:rotate3d(0,0,1,-90deg);-moz-transform:rotate3d(0,0,1,-90deg);-ms-transform:rotate3d(0,0,1,-90deg);-o-transform:rotate3d(0,0,1,-90deg)}.sideShow .arrows{transform:rotate3d(0,1,0,180deg);-webkit-transform:rotate3d(0,1,0,180deg);-moz-transform:rotate3d(0,1,0,180deg);-ms-transform:rotate3d(0,1,0,180deg);-o-transform:rotate3d(0,1,0,180deg)}.sideShow .side{transform:translate3d(2px,0,0);-webkit-transform:translate3d(2px,0,0);-moz-transform:translate3d(2px,0,0);-ms-transform:translate3d(2px,0,0);-o-transform:translate3d(2px,0,0)}.sideShow .wrap{padding-left:210px}.sideShow .sidebar{transform:none;-webkit-transform:none;-moz-transform:none;-ms-transform:none;-o-transform:none;box-shadow:1px 0 5px #ededed;-webkit-box-shadow:1px 0 5px #ededed;-moz-box-shadow:1px 0 5px #ededed;-ms-box-shadow:1px 0 5px #ededed;-o-box-shadow:1px 0 5px #ededed}.sidebar{left:0;top:0;bottom:0;z-index:2;width:210px;transform:translate3d(-210px,0,0);-webkit-transform:translate3d(-210px,0,0);-moz-transform:translate3d(-210px,0,0);-ms-transform:translate3d(-210px,0,0);-o-transform:translate3d(-210px,0,0);transition:transform .3s ease-in-out;background-color:#ededed}.sidebar .head-icon{margin:30px auto 10px;width:72px;height:72px}.sidebar .head-icon img{width:60px;height:60px;border:6px solid rgba(255,255,255,.85);border-radius:50%}.sidebar .desc{margin:0 auto;color:#707070;max-width:180px}.sidebar .name{color:#000;padding:0 0 10px}.sidebar .side-nav{margin-top:35px;text-align:center;font-size:16px}.sidebar .side-nav .nav-item{display:inline-block;padding:0 4px}.sidebar .side-nav .nav-item span{color:#616171;display:block;transition:.2s color}.sidebar .side-nav .nav-item:hover span,.sidebar .social-wrap .item:hover i{color:#000}.sidebar .side-nav .nav-item:nth-child(n+2){border-left:2px solid #e0e0e0}.sidebar .social-wrap{margin:30px auto 0;width:180px;text-align:center}.sidebar .social-wrap .item{padding:5px;display:inline-block;transition:.2s all ease-in-out}.sidebar .social-wrap .item:hover{background-color:#e3e3e3}.content{max-width:760px;min-height:768px;margin:0 auto;padding:20px 40px;background-color:#fff;box-shadow:0 1px 3px #e3e3e3;-webkit-box-shadow:0 1px 3px #e3e3e3;-moz-box-shadow:0 1px 3px #e3e3e3;-ms-box-shadow:0 1px 3px #e3e3e3;-o-box-shadow:0 1px 3px #e3e3e3}.archives{margin-bottom:50px;animation:flow 530ms ease-in-out}.archives .title-wrap{margin:20px 0;padding-bottom:10px;border-bottom:1px solid #e0e0e0}.archives .read-more a:hover,.archives .title-wrap .page-info a:hover{border-bottom:1px solid #1b1a1a}.archives .title-wrap h1{font-size:1.8em;color:#202020}.archives .title-wrap .post-title{position:relative;display:inline-block}.archives .title-wrap .post-title::before{content:'';bottom:0;width:100%;position:absolute;border-top:2px solid #1b1a1a;transform:scale3d(0,1,1);-webkit-transform:scale3d(0,1,1);-moz-transform:scale3d(0,1,1);-ms-transform:scale3d(0,1,1);-o-transform:scale3d(0,1,1);transition:transform .2s ease-in-out}.archives .title-wrap .post-title:hover::before{transform:scale3d(1,1,1);-webkit-transform:scale3d(1,1,1);-moz-transform:scale3d(1,1,1);-ms-transform:scale3d(1,1,1);-o-transform:scale3d(1,1,1)}.archives .title-wrap .page-info{font-size:16px;color:#616171}.archives .title-wrap .page-info a{color:#616171}.archives .read-more{text-align:left}.archives .read-more a{color:#202020;line-height:14px;transition:all .2s ease-in-out}.archives .read-more a:hover span{color:#000}.archives .read-more a span{font-size:14px}.archives .read-more a span::after{font-size:12px}.archives .content-wrap h1,.archives .content-wrap h2,.archives .content-wrap h3,.archives .content-wrap h4{color:#b71c1c;margin:1.5em 0 1em}.archives .content-wrap h1{font-size:1.75em}.archives .content-wrap h2{font-size:1.5em}.archives .content-wrap h3,.archives .content-wrap h4{font-size:1.1em}.archives .content-wrap blockquote{border-left:.3em solid #e0e0e0}.archives .content-wrap blockquote p{padding-left:.8em}.archives .content-wrap ul{padding-left:1.5em}.archives .content-wrap ul li{list-style:circle}.archives .content-wrap .code,.archives .content-wrap figure table{border:none}.archives .content-wrap p{margin:1em 0;text-align:justify}.archives .content-wrap img{display:block;max-width:90%;margin:0 auto;border:1px solid #e0e0e0}.archives .content-wrap a{color:#4078c0}.page-nav .current,.page-nav a{color:#616171}.archives .content-wrap table{max-width:80%;margin:0 auto;border:1px solid #ddd;border-spacing:0;border-collapse:collapse}.archives .content-wrap th{padding:8px;text-align:left;line-height:1.42857143;vertical-align:bottom;border:1px solid #ddd;border-bottom-width:2px;box-sizing:border-box}.cate-head,.ct-title,.footer,.page-nav,.tags-cloud{text-align:center}.archives .content-wrap td{border:1px solid #ddd;padding:8px;line-height:1.42857143;vertical-align:top}.page-nav .current,.page-nav .extend:hover,.page-nav .page-number:hover{border-bottom:1px solid #000}.page-nav{margin:40px 0}.page-nav .extend,.page-nav .page-number,.page-nav .space{position:relative;display:inline-block;width:30px;height:30px;margin:0 10px}.page-nav .page-number{text-align:center;font-size:16px;line-height:30px}.page-nav .extend{line-height:30px}.page-nav .extend i{font-size:12px}.ds-thread{width:96%;margin:0 auto}.content .highlight,.content pre{background:#fafafa;margin:1em auto;padding:10px;overflow:auto;color:#515151;line-height:1.5;white-space:pre;word-spacing:normal;word-break:normal}.content .gist .gist-file .gist-data .line-numbers{color:#666;font-size:.85em}.content code,.content pre{font-family:consolas,menlo,monospace}.content code{background:#fefefe;text-shadow:0 1px #fff;padding:0 .3em}.content pre code{background:0 0;text-shadow:none;padding:0}.content .highlight pre{border:none;margin:0;padding:0}.content .highlight table{margin:0;width:auto}.content .highlight td{border:none;padding:0}.content .highlight figcaption{font-size:.85em;color:#999;line-height:1em;margin-bottom:1em}.content .highlight figcaption a{float:right}.content .highlight .gutter pre{display:none}.content .highlight .line{height:1.5em}.content .highlight .line.marked{background:#515151}.content .gist{margin:0 -20px;border-style:solid;border-color:#e0e0e0;border-width:1px 0;background:#fafafa;padding:15px 20px 15px 0}.content .gist .gist-file{border:none;font-family:font-mono;margin:0}.content .gist .gist-file .gist-data{background:0 0;border:none}.content .gist .gist-file .gist-data .line-numbers{background:0 0;border:none;padding:0 20px 0 0}.content .gist .gist-file .gist-data .line-data{padding:0!important}.content .gist .gist-file .highlight{margin:0;padding:0;border:none}.content .gist .gist-file .gist-meta{background:#fafafa;color:#999;font:.85em font-sans;text-shadow:0 0;padding:0;margin-top:1em;margin-left:20px}.content .gist .gist-file .gist-meta a{color:color-link;font-weight:400}pre .comment,pre .title{color:#999}pre .attribute,pre .css .class,pre .css .id,pre .css .pseudo,pre .html .doctype,pre .regexp,pre .ruby .constant,pre .tag,pre .variable,pre .xml .doctype,pre .xml .pi,pre .xml .tag .title{color:#f2777a}pre .built_in,pre .constant,pre .literal,pre .number,pre .params,pre .preprocessor{color:#f99157}pre .class,pre .css .rules .attribute,pre .header,pre .inheritance,pre .ruby .class .title,pre .ruby .symbol,pre .string,pre .value,pre .xml .cdata{color:#9c9}pre .css .hexcolor{color:#6cc}pre .coffeescript .title,pre .function,pre .javascript .title,pre .perl .sub,pre .python .decorator,pre .python .title,pre .ruby .function .title,pre .ruby .title .keyword{color:#69c}pre .javascript .function,pre .keyword{color:#c9c}.cate-head{margin-top:20px;font-size:1.5em}.cate-list-item{display:inline-block;padding:0 8px}.cate-list{max-width:80%;margin:40px auto 0}.cate-list a{color:#323232;padding:5px}.cate-list span,.ct-title small{color:#616171}.cate-list span:before{content:'['}.cate-list span:after{content:']'}.tags-cloud{width:80%;margin:20px auto 0;text-indent:4px;word-break:normal}.tags-cloud a{display:inline-block;margin:5px}.tags-cloud a:hover{border-bottom:1px solid #e3e3e3}.ct-title{margin:10px auto 20px}.ct-title h2{font-size:1.75em}.footer{max-width:760px;margin:10px auto 0;background-color:#fff;box-shadow:0 0 5px #e3e3e3;-webkit-box-shadow:0 0 5px #e3e3e3;-moz-box-shadow:0 0 5px #e3e3e3;-ms-box-shadow:0 0 5px #e3e3e3;-o-box-shadow:0 0 5px #e3e3e3;padding:10px 40px}.footer a{color:#4078c0}.footer div{padding:5px}@media screen and (max-width:800px){.side{display:none}.content{padding:20px}.footer,.header{max-width:800px}.page-nav .page-number{width:25px;height:25px;line-height:25px}}</style></head><body><script type="text/javascript">!function(){"true"==localStorage.getItem("sidebarState")&&(document.body.className="sideShow")}()</script><div id="container"><aside class="sidebar"><div class="head-icon"> <a href="/about"><img src="/avatar.jpeg"></a></div><div class="name">hiluluke</div><div class="desc"><h4>我是一个粉刷匠</h4></div><nav class="side-nav"><div class="nav-item"> <a href="/"><span>37</span> <span>日志</span></a></div><div class="nav-item"> <a href="/categories"><span>8</span> <span>分类</span></a></div><div class="nav-item"> <a href="/tags"><span>26</span> <span>标签</span></a></div></nav><div class="social-wrap"><a href="https://github.com/wszgxa" target="_blank"><div class="item"><i class="i-github"></i></div></a><a href="http://v2ex.com/member/hiluluke" target="_blank"><div class="item"><i class="i-v2ex"></i></div></a><a href="https://www.zhihu.com/people/zhao-guo-xu" target="_blank"><div class="item"><i class="i-zhihu"></i></div></a><a href="https://twitter.com/Hiluluke" target="_blank"><div class="item"><i class="i-twitter"></i></div></a><a href="http://codepen.io/hiluluke" target="_blank"><div class="item"><i class="i-codepen"></i></div></a></div></aside><div class="wrap"><div class="side"><div class="top" id="back-top"></div><div class="arrows" id="nav-btn"></div></div><header class="header menu-archives"><nav> <a class="menu-item-home" href="/">首页</a> <a class="menu-item-categories" href="/categories">分类</a> <a class="menu-item-tags" href="/tags">标签</a> <a class="menu-item-about" href="/about">关于</a> <a class="menu-item-rss" href="/atom.xml">RSS</a></nav></header><section id="main" class="content"><section class="archives-wrap"><div class="archives"><div class="title-wrap"><a class="post-title" href="/2018/10/11/FP-with-JS-compose/"><h1>JS函数式编程 - 函数组合与柯里化</h1></a><div class="page-info"> <span>By <a href="/about">hiluluke</a> on</span> <time datetime="2018-10-10T16:00:00.000Z" itemprop="datePublished">Oct 11 2018</time></div></div><div class="content-wrap"><p>我们都知道单一职责原则，其实面向对象的SOLID中的S(SRP, Single responsibility principle)。在函数式当中每一个函数就是一个单元，同样应该只做一件事。但是现实世界总是复杂的，当把现实世界映射到编程时，单一的函数就没有太大的意义。这个时候就需要函数组合和柯里化了。</p><h2 id="链式调用"><a href="#链式调用" class="headerlink" title="链式调用"></a>链式调用</h2><p>如果用过jQuery的都晓得啥是链式调用，比如<code>$(&#39;.post&#39;).eq(1).attr(&#39;data-test&#39;, &#39;test&#39;)</code>.javascript原生的一些字符串和数组的方法也能写出链式调用的风格：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'Hello, world!'</span>.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>) <span class="comment">// "!dlrow ,olleH"</span></span><br></pre></td></tr></table></figure><p>首先链式调用是基于对象的，上面的一个一个方法<code>split</code>, <code>reverse</code>, <code>join</code>如果脱离的前面的对象”Hello, world!”是玩不起来的。</p></div><div class="read-more"> <a href="/2018/10/11/FP-with-JS-compose/"><span class="i-next">阅读全文</span></a></div></div><div class="archives"><div class="title-wrap"><a class="post-title" href="/2018/10/08/FP-with-JS-concept/"><h1>JS函数式编程 - 概念</h1></a><div class="page-info"> <span>By <a href="/about">hiluluke</a> on</span> <time datetime="2018-10-07T16:00:00.000Z" itemprop="datePublished">Oct 8 2018</time></div></div><div class="content-wrap"><p>最近在看Typescript，顺便看了一些函数式编程，然后半个国庆假期就没有了。做个笔记，分几个部分写吧。</p><p>最开始接触函数式编程的时候，第一个接触的概念就是高阶函数，和柯里化。咋一看，这不就是长期用来讲作用域的demo吗？我在日常也有用啊，有啥吗？</p><p>其实呢，设计模式或则编程范式往往不在于技巧，而在于思想。函数式编程就是一种编程的范式，并不在于技巧多么叼，而在于它的思想。其次才是由设计思想才衍生出来的技巧，技巧往往而言是服务于思想的。所以我觉得最开始学习函数式编程最好先了解一些相关概念和思想会比较好。</p><h2 id="函数是一等公民-first-class"><a href="#函数是一等公民-first-class" class="headerlink" title="函数是一等公民(first class)"></a>函数是一等公民(first class)</h2><p>如果理解直接看为一等公民的好处好处。</p><p>其实说函数式一等公民的意思就是说函数和其他“公民”具有相同的属性。就像任何一种数据类型，它能够被存储在数组中，能够作为函数的参数，能够赋值给变量:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hello = <span class="function">(<span class="params">name</span>) =&gt;</span> (<span class="string">`Hello <span class="subst">$&#123;name&#125;</span>!`</span>)</span><br><span class="line"><span class="keyword">const</span> sayHello = hello; <span class="comment">// 作为变量 </span></span><br><span class="line"><span class="keyword">const</span> helloArray = [hello, sayHello]</span><br></pre></td></tr></table></figure><p>上面的代码没有什么意义，只是表达函数在JavaScript中是一等公民，和一个值一样。</p><h3 id="函数是一等公民的好处"><a href="#函数是一等公民的好处" class="headerlink" title="函数是一等公民的好处"></a>函数是一等公民的好处</h3><p>拿一个callback的例子来讲，比如你用fetch发个请求时：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">'getPostLink'</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> renderPosts(res))</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> handleError(error))</span><br></pre></td></tr></table></figure><p></p><p>上面其实可以直接传递一个函数作为回调，加一层包裹其实没有必要：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">'getPostLink'</span>).then(renderPosts).catch(handleError)</span><br></pre></td></tr></table></figure><p></p><p>多一层函数的包裹并没有任何意义，完全是多余的代码。再看一个例子：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> postController = &#123;</span><br><span class="line">  find(postId) &#123; <span class="keyword">return</span> Db.find(postId) &#125;,</span><br><span class="line">  <span class="keyword">delete</span>(postId) &#123; <span class="keyword">return</span> Db.delete(postId) &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>上面的代码其实就是聚合一些功能作为一个对象，但是多加了一层的函数，也是没有必要的，在阅读的时候到会增加复杂度，其实<code>postController.find === Db.find</code>，所以完全没有再去包裹一层函数：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> postController = &#123;</span><br><span class="line">  find: Db.find,</span><br><span class="line">  <span class="keyword">delete</span>: Db.delete,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>上面的代码是不是更表意，然而如果js的函数不能像值一样传递，上面的简写都是不可能的。上面的代码其实还有一个好处，你不用去纠结如何命名在两层函数之间的参数了。这种风格代码是符合Pointfree的，我们后面要介绍。另外，函数式编程是操作函数的，所以函数是一等公民也是函数式的基石，基本上如果js不支持这一项，函数式根本玩不转。</p></div><div class="read-more"> <a href="/2018/10/08/FP-with-JS-concept/"><span class="i-next">阅读全文</span></a></div></div><div class="archives"><div class="title-wrap"><a class="post-title" href="/2018/08/29/facc-hoc/"><h1>React中的函数子组件(FaCC)和高阶组件(HOC)</h1></a><div class="page-info"> <span>By <a href="/about">hiluluke</a> on</span> <time datetime="2018-08-28T16:00:00.000Z" itemprop="datePublished">Aug 29 2018</time></div></div><div class="content-wrap"><p>在接触过React项目后，大多数人都应该已经了解过或则用过了HOC(High-Order-Components)和FaCC(Functions as Child Components)，因为这两个模式在大多数react的开源库里都存在。比如react-router里面的<a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/modules/withRouter.js#L9" target="_blank" rel="noopener">withRouter</a> 就是典型的高阶组件，接受一个组件返回另外一个经过增强后的组件。而react-motion中的<a href="https://github.com/chenglou/react-motion/blob/master/src/Motion.js#L28" target="_blank" rel="noopener">Motion</a>就是典型的FaCC的应用。</p><p>HOC和FaCC两者做的事也是非常相似的，都是类似设计模式里面的装饰者模式。都是在原有的实例或则单元上进行功能的增强。</p><p>当然不只是一些开源库中会使用，在平常的代码编写中，也有很多地方是适用于使用HOC和FaCC去封装一些逻辑。比如数据埋点，新特性的toggle，获取转换数据等。对于增强代码可读性和逻辑复用来说，非常有用的。</p></div><div class="read-more"> <a href="/2018/08/29/facc-hoc/"><span class="i-next">阅读全文</span></a></div></div><div class="archives"><div class="title-wrap"><a class="post-title" href="/2017/11/20/js-performance-data/"><h1>JS 性能优化 - 数据存取</h1></a><div class="page-info"> <span>By <a href="/about">hiluluke</a> on</span> <time datetime="2017-11-19T16:00:00.000Z" itemprop="datePublished">Nov 20 2017</time></div></div><div class="content-wrap"><h2 id="console-time-amp-console-timeEnd"><a href="#console-time-amp-console-timeEnd" class="headerlink" title="console.time &amp; console.timeEnd"></a>console.time &amp; console.timeEnd</h2><p>为了比较具体代码快的运行速度我们需要一些度量工具。<code>console.time</code>和<code>console.timeEnd</code>是浏览器原生就支持的属性。具体用法：<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generate100Array</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">100</span>);</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)&#123;</span><br><span class="line">    arr[i]=<span class="string">''</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = generate100Array()</span><br><span class="line"><span class="keyword">var</span> b = generate100Array()</span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">'for'</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = a.length; i &lt; len; i++) &#123;</span><br><span class="line">  a[i] = i</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'for'</span>)</span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">'forEach'</span>)</span><br><span class="line">b.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">el, index</span>) </span>&#123;</span><br><span class="line">  b[index] = index</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'forEach'</span>)</span><br></pre></td></tr></table></figure><p></p><p>你可以复制粘贴上面代码到chrome 终端运行一下，你会发现<code>for</code>比<code>forEach</code>快，在我的chrome62.0 大概是快3-4倍。列出的理论，我都会提供相应代码，大家可以自己去试试。我只会在chrome下实验，并给出比较结果。</p></div><div class="read-more"> <a href="/2017/11/20/js-performance-data/"><span class="i-next">阅读全文</span></a></div></div><div class="archives"><div class="title-wrap"><a class="post-title" href="/2017/11/19/js-performance-load/"><h1>JS 性能优化 - 脚本的加载和执行</h1></a><div class="page-info"> <span>By <a href="/about">hiluluke</a> on</span> <time datetime="2017-11-18T16:00:00.000Z" itemprop="datePublished">Nov 19 2017</time></div></div><div class="content-wrap"><h2 id="引子"><a href="#引子" class="headerlink" title="引子"></a>引子</h2><p>开年的一次面试中记录下来的知识欠缺点，发现这块的东西自己也只是零零散散的，不够系统。面试真的是查漏补缺的好地方，所以就买了一波性能相关的书籍，慢慢看，慢慢总结吧。这一波是记录一些纯js相关的性能提升，不涉及具体框架，纯纯的在写js中需要注意的性能优化点。这部分相关的笔记，大部分内容来自阅读《高性能JavaScript》。</p><h2 id="JS-的加载和执行"><a href="#JS-的加载和执行" class="headerlink" title="JS 的加载和执行"></a>JS 的加载和执行</h2><p>基本上这是一个常识，js的加载和执行会阻塞页面的渲染和交互。很多浏览器甚至是用单一进程来处理的UI刷新和JS执行。所以我们在让页面加载的过程中需要注意避免让js的加载执行和浏览器的UI渲染冲突。下面就是一些解决方案：</p><h3 id="脚本位置"><a href="#脚本位置" class="headerlink" title="脚本位置"></a>脚本位置</h3><p>浏览器在处理html的时候，是从上到下解析的。所以，在HTML上的标签位置决定了浏览器解析的先后顺序。为了解决JS与浏览器冲突，通常情况下，我们是将JS放在最后的：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 其他的html --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://hiluluke.cn/js/simple_build.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  <span class="comment">&lt;!-- 将script放在最后，body前 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="read-more"> <a href="/2017/11/19/js-performance-load/"><span class="i-next">阅读全文</span></a></div></div><nav id="page-nav" class="page-nav"> <span class="page-number current">1</span><a class="page-number" href="/archives/page/2/">2</a><a class="page-number" href="/archives/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/archives/page/8/">8</a><a class="extend next" rel="next" href="/archives/page/2/"><i class="i-right"></i></a></nav></section></section><footer class="footer"><div>我是一个粉刷匠</div><div>由 <a href="https://hexo.io/">Hexo</a> 强力驱动 | 主题- <a href="https://github.com/wszgxa/hexo-theme-simple">Simple</a></div></footer></div></div><script src="/js/simple_build.js"></script><script type="text/javascript">function run_disqus_script(s){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/"+s,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}var disqus_shortname="hilus-note",disqus_identifier="archives/index.html",disqus_title="",disqus_url="";run_disqus_script("count.js")</script><script>!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-83014983-1","auto"),ga("send","pageview")</script></body></html>